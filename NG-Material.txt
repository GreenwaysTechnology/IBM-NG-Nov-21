

Why Java script was created?

For Web

-is it to create web apps using html.
  No
-To modify the html document inside web browser.


            					DOM 
				 (Document Object Model)

DOM: 
   DOM is spec , defined by W3C to reprenent html elements inside javascript engine.


HTML internal work flow:
........................


...........................................................................................
					compile time
index.html -source code

<html>
<head></head>
<title><title>
<body>
  <div>
     <h1>Welcome</h1>
  </div>
</body>
</html>
   |
------- Loaded into browser using http protocal or ftp or local disk protocal
   |
 Parser  => generates a parsed lexical tree
   |
html
  head
 title
body
  div
     h1 Welcome h1
  div
 body
   html
  |
.......................................................
 compiler  =>generates assembly instruction

html -0AbcA
  head -load head
 title
body
  div
     h1 Welcome h1
  div
 body
   html
--------------------------------------------------------------------------------------------
   |				   Runtime
   |
 runtime ===> will allocate memory on RAM. 

Linked List will be created

html - Node
  head -Node
 title -Node
body - Node
  div - Node
     h1 Welcome h1
  div
 body
   html


Tree will be created -Nodes are linked in hierachical order - parent-child arch

html - Node
  |
  head -Node
   |
 title -Node
   |
body - Node
  |
  div - Node
    |
     h1 Welcome h1
  div
   |
 body
    |
   html
---------
   |
Paint Engine /Layout Engine
  |
Nodes are converted into pixels and drawn on the screen - OUTPUT
---------------------------------------------------------------------------------------------  
Birth of Javascript:
...................

At Netscap decided to modifiy the linked list / tree via special program 

netscap decided to create very light weight programming language to access the tree and modify the tree at runtime - js
............................................................................................
					HTML Elements
.............................................................................................


HTML Elements types

1.built in elements

2.custom elements


HTML Elements types

1.built in elements

2.custom elements
HTML Elements types

1.built in elements

2.custom elements



1.built in elements
  are part of html language spec
 h1,body,p,nav,div

compiler design

 source code
                              compiler db -[div]
                                 |
  <div></div> ----- compile----compiler
                                  |
                      ------------------------
                    if present             
                      |
                    execution
                      |
                     node
                       |
                     screen


                                compiler db -[Subramanian]
                                    |
  <subramanian></subramaian> ----- compile----compiler
                                  |
                      ------------------------
                    if present            if not present           
                      |                        |
                    execution              throw error - UnKnown Element
                      |                                 |
                     node                              Convert that element into PlainText   
                       |                               |
                     screen                           render



2.IN 2007-2008 W3C Decided to introduce new html spec - html 5

 -custom elements - how to add new elements
 -custom attributes - how to add custom attribues on existing html specs

Custom Types
int,float =  class A{ int,float }

how to teach browser to understand custom elements and attributes
   -via Javascript


                             compiler db -[Subramanian]
                                    |
 <subramanian></subramaian> ----- compile----compiler
                                  |
                      ------------------------
                    if present            if not present           
                      |                        |
                    execution              feed into js 
                      |                                 |
                     node                              js will do something   
                       |                               |
                     screen                           render



eg:

class AppDrawer extends HTMLElement {...}

window.customElements.define('app-drawer', AppDrawer);

// Or use an anonymous class if you don't want a named constructor in current scope.
window.customElements.define('app-drawer', class extends HTMLElement {...});



  			              compiler db -[div,Subramanian]
                                           |
<subramanian></subramaian> --jsengine will add new defintion--- compile----compiler
                                   |
                      ------------------------
                    if present            if not present           
                      |                        |
                    execution              throw error - UnKnown Element
                      |                                 |
                     node                              Convert that element into PlanText   
                       |                               |
                     screen                           render

////////////////////////////////////////////////////////////////////////////////////////////
Angular and Custom Elements:

 Angular follows custom element spec in order to create apps.


  Custom Element
  <app-root></app-root>
                  |
                  ------------->|import { Component } from '@angular/core';

				@Component({
 				 selector: 'app-root',
  				templateUrl: './app.component.html',
  				styleUrls: ['./app.component.css']
				})
				export class AppComponent {
					  title = 'ng-helloworld';
				}


<app-root></app-root> ---------------function AppComponent(){ 
                                           //dom code
                                     }


/////////////////////////////////////////////////////////////////////////////////////////////
					Angular Code Part
.............................................................................................

Angular is collection of many projects.

-angular cli

Angular cli :

npm install -g @angular/cli


ng new getting-started

cd getting-started

ng serve
.............................................................................................

Angular is DOM Framework, we create dom objects,modify dom objects via Typescript(javascript).

Component:
  It is one of infra Object.
  It represents DOM objects(HTML elmements)

In Angular no infra object is created by developer rather angular uses ioc /dependency injector- objects are created by the framework and avaialble for us to use.

In Angular all infra object features are injected via "Decorators".

How to create Object ?

-We need class.

class MyClass {

}

let mycls = new MyClass(); =>This step we dont do in angular, angular takes care of that.


How to create Compoent ?

@Component({})
class MyClass {

}

Now Myclass is not normal class, rather which is component class.

Decorators and Infra Objects:
.............................
1.module   ---@NgModule
2.component---@Component
3.service --@Injectable
4.directive -@Directive
5.pipes -@Pipe
.............................................................................................
					Angular App Structure
..............................................................................................

Angular App is collection of many objects.

Angular provides container object called "Module" Object.


Modules:
   Organzation of code.

Types of Modules in angular.

1.Physical module(ES 6 modules)
   
   Separation of code into files and folders

src/app/customer/customer.component.ts

export class Customer {}


import {Customer} from './app/customer/customer.component'


2.Logical modules(Object organzation)
    
    organization of objects(c,directives) at runtime based on features
 we call ngModules
 

Every angular application must have one single container object called "AppModule"


//////////////////////////////////////////////////////////////////////////////////////////////
				   Dependency Injection
............................................................................................

Angular Creates objects automatically , we dont need to create them.

How angular understand that , object need to be created. 

Thats where configuration comes into picture.


Angular defines three types of objects for DI:
..............................................

1.View Objects
   Component,Directive,Pipe
2.SubModules
   @NgModule
3.Services
   @Injectable
.............................................................................................
					Angular MVC Architecture
.............................................................................................

M - model - domain objects
V - View - dom elements -  html elements
C- Controller - Component

Component:

 Object to represent "View" in app

Every angular app must have one Component - Root Component -Main Compoent -Main Page-App Component. - Landing Page


How to create Component?

Component consist of following things?

1.template
    collection of angular instructions

Angular instructions:
1.1. html elements - div,p,span
1.2. data binding symbols -special instructions
     *,[],(),#,directives <>,pipes(|)

2.css
   style sheet
3.code
   logic written in typescript 
 variables,methods,interfaces



How to create Component?

Component consist of following things?

1.template
    collection of angular instructions

Angular instructions:
1.1. html elements - div,p,span
1.2. data binding symbols -special instructions
     *,[],(),#,directives <>,pipes(|)

2.css
   style sheet
3.code
   logic written in typescript 
 variables,methods,interfaces

Comonent has follwing things?

 -dependency
     -services

Steps:

1.declare component class and export it.

export class AppComponent {

}

2.decorate component class. -@Component
Decorator that marks a class as an Angular component and provides configuration metadata that determines how the component should be processed, instantiated, and used at runtime.

3.meta Object {}
@Component({})

@Component({})
export class AppComponent {

}

4.provide meta information
 selector - custom element name
 template - instructions
 css - styles for component



Types of templates:

1.inline template
   template is part of component itself , provided within string
  template: `
           <div>
             <h1>HR Block Angular Apps welcomes you</h1>
           </div>
  `
2.external template
   template is outside component and provided via a separate .html file
templateUrl: './app.component.html',

import { Component } from "@angular/core";

@Component({
  selector: 'app-root',
  templateUrl:'./app.component.html'
})
export class AppComponent {

}
//////////////////////////////////////////////////////////////////////////////////////////////
				   Dependency Injection
............................................................................................

Angular Creates objects automatically , we dont need to create them.

How angular understand that , object need to be created. 

Thats where configuration comes into picture.


//AppModule - to have other objects
// contains injector configuration to create object

import { NgModule } from "@angular/core";
import { BrowserModule } from "@angular/platform-browser";
import { AppComponent } from "./app.component";



@NgModule({
  declarations: [AppComponent], //view objects - Component,Directive,Pipes
  imports: [BrowserModule], //submodules -from angular or custom sub modules
  providers: [], // services,
  bootstrap: [AppComponent]
})
export class AppModule { }
.............................................................................................
				Component driven architecture
............................................................................................

 Angular apps are collection of components.
 Component represent "custom html element"
 custom html element may compose other custom element and htmls elements- hi
 you need to design app based on html hierachical design

  <parent>         ----------------------------Appcomponent -selector
      <child-1>  ------------------------------Child1Component
              <sub-child></sub-child>
      </child-1>
      <child-2> -sibling
		<sub-child>
			...
		</sub-child>
      <child-2>
  </parent>


 <div>
    <div>
        <div></div>
    </div>
 <div>

<app-root>
  <app-header>
        ....
   </app-header>

  <app-body>
        ....
  </app-body>

  <app-footer>

 </app-footer>
 </app-root>
..............................................................................................

Task : 
 -create header /body /footer component
 
Angular coding best pratices:
...............................
https://angular.io/guide/styleguide


file name:
recommended
 header.component.ts
not recommended
 headercomponent.ts
 hcmp.ts

component:
 ts file
 html file
 css file
 spec file

header.component.ts
header.component.html
header.component.css
header.component.spec.ts

style guide for file names

domainname.component|service|directive|pipe.ts
hero.component.ts
hero.service.ts
hero.directive.ts
hero.pipe.ts


Custom elements Naming convention:Component selectors

 <app-root> - recommended
  
 <approot>  - not recommended.

Do use dashed-case or kebab-case for naming the element selectors of components.

............................................................................................

class Names:

 1.Noun
 2.should be meaningfull
 3.should have suffix component,service,directive,pipe

 HeaderComponent
 HeaderService
 HeaderDirective
 HeaderPipe
..............................................................................................
Steps to create Component

1.declare componenent class
2.declare component html 
3.write component logic
4.dependency injection inside moudle
5.refer the compoent inside template.
...........................................................................................
Style guide to create components or any objects

1.modularazation

-physical modularity 
   folders
     files

src
  app
   |
   header
     header files
   footer
     footer files
   body 
    body files

-logical modularity 
    object grouping
 sub modules
   header module 


Style guide to create components or any objects

1.modularazation

-physical modularity 
   folders
     files

src
  app
   |
   header
     header files
   footer
     footer files
   body 
    body files

-logical modularity 
    object grouping
 sub modules
   header module 


Steps:

1.create folder
2.create modules
3.create components/directives/services 
4.DI inside sub module


Error: src/app/app.component.html:2:5 - error NG8001: 'app-header' is not a known element:
1. If 'app-header' is an Angular component, then verify that it is part of this module.
2. If 'app-header' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the '@NgModule.schemas' of this component to suppress this message.

2     <app-header></app-header>
      ~~~~~~~~~~~~


Module Scope:
Any Component,Pipe,Directive,submodule refers inside a module will be available inside that module only. Module Scope


Module Scope:

1.public scope
   if any objects belong to all modules that  is public
2.private scope
  if any objects belong to that module is private including appmodule.

if you want to make any object in public scope, you need to configer it

"exports: "
..............................................................................................
..............................................................................................
                       Angular CLI   Automate && accelerate your work flow
.............................................................................................

Problems in the dev flow:

Tasks:

1.create folder
2.create files - component-ts,html,css,spec
3.create module
4.declare class -cmp,service...
5.refer the classes inside module
6.you need to inject submodule into main module..

if you repeate the same thing for every object , which increases lot of time.

Automation:
 code generation automation

angular cli tool to generate code.

Generates and/or modifies files based on a schematic.

ng generate <schematic> [options]
ng g <schematic> [options]


//create folder, create module, inject this module into app module
>>ng g m footer --module=app
CREATE src/app/footer/footer.module.ts (192 bytes)
UPDATE src/app/app.module.ts (451 bytes)

create component, inside footer folder, inject into footer module, make it available public
i dont want css file,i want html file,i dontwant spec file

ng g c footer/footer  --flat=true --export=true --inline-style=true --skip-tests=true   --module=footer


 --flat=true :  create any thing inside exsiting folder
 --export=true : make it public
 --inline-style=true : i dont want css file
 --skip-tests=true  :dont create spec files
 --module=footer  : inject inside footer module

ng g m body --module=app   
ng g c body/body  --flat=true --export=true --inline-style=true --skip-tests=true   --module=body
..............................................................................................

...............................................................................................				Data binding
..............................................................................................

UI types

1.static ui
   only html
2.dynamic ui
  html + data and which change by user interactions

Data binding:
 Transfering state to ui(view)

Types of databinding

1.interpolation
2.property binding
3.attribute binding
4.event binding
5.two way data binding
6.class binding
7.style binding


MVC - Angular is MVC Framework
M- DATA
V-View -template
C - Controller - Component

...........................................................................................

Interpolation:
import { Component, OnInit } from '@angular/core';
import { Address } from '../types/address.type';

@Component({
  selector: 'app-interpolation',
  templateUrl: './interpolation.component.html',
  styles: [
  ]
})
export class InterpolationComponent implements OnInit {

  //instance variables ; models- data
  firstName: string = "Subramanian";
  age: number = 18;
  isValid: boolean = true;
  //objects
  address: Address = {
    city: 'Coimbatore',
    state: 'TN'
  };
  //Array
  skills: Array<string> = ["javascript", "angular", "typescript", "microservices"];


  constructor() { }

  ngOnInit(): void {
  }

}
<div>
    <h1>InterPolation</h1>
    <h2>Primitives</h2>
    <h3>String - {{firstName}}</h3>
    <h3>Number - {{age}}</h3>
    <h3>Boolean -{{isValid}}</h3>
    <h2>Object</h2>
    <h3>Object Properties {{address.city}} {{address.state}}</h3>
    <h2>Array</h2>
    <ul>
        <li *ngFor="let skill of skills">
            {{skill}}
        </li>
    </ul>

</div>
.............................................................................................
2.attribute binding
3.property binding

Angular instructions:
....................
Collection of symbols used inside html - template

{{}}
[]
*
#
()
[()]
..........................................................................................
			[] -  symbol used for property,attribute,style,class binding
...........................................................................................

What is   attribute and property? - []

<img src="imagelocation"/>
      |
 attribute
<a href="url">
   |
 attribute

Attribute values:
 - static attribute
eg:
   <img src="logo.png">


What is   attribute and property? - []

<img src="imagelocation"/>
      |
attribute

Why [] ?

  To bind value dynamically.
  
<img src="logo.png"/> -static image

<img [src]="variable"> - dynamic image

<div hidden> --- static value to hide div element

<div [hidden]="booleanvariable"> --- static value to hide div element

<button enabled>

<button [enabled="booleanvariable"> - dynamic value

if you use "[]"  on html elements which is called "attribute binding"
............................................................................................
				  Styling Components
.............................................................................................

Styles in angular :

1.global style
2.component specific style

global style:

style.css

bootstrap -  npm install bootstrap

angular.json
 "styles": [
              "src/styles.css",
              "./node_modules/bootstrap/dist/css/bootstrap.css"
            ],


<div class="container">
  <h1>Angular Data Binding</h1>
  <!-- <app-interpolation></app-interpolation> -->
  <app-attributes></app-attributes>
</div>

<div style="background-color: black; color: whitesmoke;">
    <h1>Attribute Binding</h1>
    <h2>Static Attribute - Static Image</h2>
    <img src="favicon.ico" />
    <h2>Dynamic Attribute - Dynamic Image</h2>
    <img [src]="imageLocation" />
    <h3>Dynamic Attribute - Enable or Disable Element</h3>
    <button [disabled]="isEnabled">Hello</button>
    <div [hidden]="isHidden">
        <h1>Hidden</h1>
    </div>
</div>
..............................................................................................
					Property Binding


What is property binding?
 Passing dynamic values  to the custom elements

Passing data from parent component to child component.
we can pass data upto n of childrens
Which is called "uni directional data flow model"
Components can be communicated via props binding.


<app-greet  [message]="variable|value"  ></app-greet>


@Component({
 selector:'app-greet',
 template: `<div> </div>
})
export class GreeterComponent{

}

Component Communication: - How components can pass data.

1.Parent -Child => via property binding
2.Child- Parent
3.across the components -sibilings -  via Services

.............................................................................................
			     Property binding
...........................................................................................

Passing data from parent component to child component.
we can pass data upto n of childrens
Which is called "uni directional data flow model"
Components can be communicated via props binding.

Two steps:

How to pass data from the parent to child?

1.From the parent component : passing data
  
  <app-greeter [message]="message">

 message:string="hello"

2. How to receive the data
   
   @Input() decorator
   message:string=""
................

  import { Component, OnInit } from '@angular/core';
  import { Address } from '../types/address.type';

  @Component({
    selector: 'app-parent',
    templateUrl: './parent.component.html',
    styles: [
    ]
  })
  export class ParentComponent implements OnInit {
    mymessage: string = "Hello! Property"
    address:Address = {
      city:'Coimbatore'
    }
    skills:Array<string> = ["java","javascript","Angular"]
    // address!: Address
    constructor() { }

    ngOnInit(): void {
    }

  }

parent.component.html
<h2>This is parent</h2>
<app-child [message]="mymessage" 
[address]="address" [skills]="skills">

</app-child>
  
............

import { Component, Input, OnInit } from '@angular/core';
import { Address } from '../types/address.type';

@Component({
  selector: 'app-child',
  templateUrl: './child.component.html',
  styles: [
  ]
})
export class ChildComponent implements OnInit {

  @Input()
  message: string = "";

  /**
   * ts config 
   * strict: true 
   * means that variable must have been initalized
   * but i dont want to make strict : false
   * there is solution : definite assigment operator "!"
   */
  @Input()
  address!: Address;

  @Input('skills')
  myskills!:Array<string>;

  constructor() { }

  ngOnInit(): void {
  }

}

child.component.html

<h2>Data from Parent</h2>
<h3>String {{message}}</h3>
<h3>Object {{address?.city ?? "Default city"}}</h3>
<h3>Array</h3>
<ul>
    <li *ngFor="let skill of myskills">
        <span>{{skill}}</span>
    </li>
</ul>

App component:
 <div>
    <h1>Property Binding</h1>
    <app-parent></app-parent>
  </div>
		..............................................................................................
					Event Binding
.............................................................................................


EventTarget Object: Event
  It connects dom object and listner method.
  where listener method can read values and other properties of dom object.

btn.addEventListener = function(evt){
  evt.target   

}
$event  - is global variable from the angular which has reference of EventTarget object


Two way binding:

-data is transfered from view to controller and controller to view 

How to implement two way data binding

1.events

///////////////////////////////////////////////////////////////////////////////////////////

Simple events:
<div>
    <button class="btn btn-success" (click)="onClick()" >Click</button>
    <!-- Pass data to listener -->
    <hr>
    <button class="btn btn-success" (click)="onReceive('hello how are you?')" >SendData</button>
</div>
import { Component, OnInit } from '@angular/core';

@Component({
  selector: 'app-event',
  templateUrl: './event.component.html',
  styles: [
  ]
})
export class EventComponent implements OnInit {


  //listener function
  onClick() {
    alert('hello')
  }
  onReceive(message:string) {
    alert(message)
  }

  constructor() { }

  ngOnInit(): void {
  }

}
..........................................................................................
			How to read input from the keyboards
                           (Two way data binding)						
............................................................................................


import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';
import { EventComponent } from './event.component';
import { InputComponent } from './input.component';
import { FormsModule } from '@angular/forms';



@NgModule({
  declarations: [
    EventComponent,
    InputComponent
  ],
  imports: [
    CommonModule,FormsModule
  ],
  exports: [
    EventComponent,
    InputComponent
  ]
})
export class EventbindingModule { }



import { Component, OnInit } from '@angular/core';

@Component({
  selector: 'app-input',
  templateUrl: './input.component.html',
  styles: [
  ]
})
export class InputComponent implements OnInit {

  text:string = ""
  messageOne:string = ""
  messageTwo:string ="defaultvalue"
  messageThree:string = ""
  readInput(ctrl: any) {
    this.text = ctrl.target.value 
  }

  constructor() { }

  ngOnInit(): void {
  }

}

input.component.html

<div>
    <h2>Input Event</h2>
    <div>
        <h3>With Listener</h3>
        <h3>{{text}}</h3>
        <input (input)="readInput($event)">
    </div>

    <div>
        <h3>Without Listener</h3>
        <h3>{{messageOne}}</h3>
        <input (input)="messageOne=$event.target.value">
    </div>
    <div>
        <h3>Property Binding + Event Binding </h3>
        <h3>{{messageTwo}}</h3>
        <input  [value]="messageTwo" (input)="messageTwo=$event.target.value">
    </div>
    <div>
        <h3>Property Binding + Event Binding = Banana Box Notation [()] </h3>
        <h3>{{messageThree}}</h3>
        <input [(ngModel)]="messageThree">
    </div>
</div>
Types of events:

1.dom events - click,input,keypress.......
2.custom events - events for custom elements

Why custom events?

Component communcation:

1.parent to child - via props pattern
2.child to parent - via custom events
3.across components -  via services

2.child to parent - via custom events


Steps : write two components

1.parent
2.child

2.child to parent - via custom events



Steps : write two components

1.parent
2.child


Parent

import { Component, OnInit } from '@angular/core';

@Component({
  selector: 'app-parent',
  templateUrl: './parent.component.html',
  styles: [
  ]
})
export class ParentComponent implements OnInit {

  constructor() { }

  ngOnInit(): void {
  }

}

2.Child Component

import { Component, OnInit } from '@angular/core';

@Component({
  selector: 'app-child',
  templateUrl: './child.component.html',
  styles: [
  ]
})
export class ChildComponent implements OnInit {

  constructor() { }

  ngOnInit(): void {
  }

}

Step 2:

 EventEmitter:

Use in components with the @Output directive to emit custom events synchronously or asynchronously, and register handlers for those events by subscribing to an instance.

1.EventEmitter is used to broad cast values to Parent Components

class EventEmitter<T> extends Subject {
  constructor(isAsync?: boolean): EventEmitter<T>
  emit(value?: T): void
  subscribe(next?: (value: T) => void, error?: (error: any) => void, complete?: () => void): Subscription
}

2.EventEmitter object is Subclass Rxjs Subject.

create EventEmitter Object of type in child compoent.

eventemitter is used to send custom events.

   onSendRequest = new EventEmitter<string>();

3.We have to decorate eventemitter with @Output()

  @Output()
  onSendRequest = new EventEmitter<string>();

4.send data to Parent Component

    <div>
        <input [(ngModel)]="message">
    </div>
    <div>
        <button (click)="onSend()">Send To Parent</button>
    </div>

export class ChildComponent {

  message: string = "Good Value"
  //event emitter Declaration
  @Output()
  onSendRequest = new EventEmitter<string>();
  onSend() {
    alert('sending data to parent')
    //emit data  -  next method in subject
    this.onSendRequest.emit(this.message)
  }

}

5.Listens event and grab the data from the Child

<div>
    <h1 style="text-align: center;">Parent Component</h1>
    <h2>{{childMessage}}</h2>
</div>
<hr/>
<app-child (onSendRequest)="onReadData($event)" ></app-child>


export class ParentComponent {

  childMessage: string;

  onReadData(event: any) {
    this.childMessage = event
  }

}

/////////////

final code :

Child:
<div>
    <h1 style="text-align: center;">Child Component</h1>
    <div>
        <input [(ngModel)]="message">
    </div>
    <div>
        <button (click)="onSend()">Send To Parent</button>
    </div>
</div>


export class ChildComponent implements OnInit {

  message: string = "Good Value"
  //event emitter Declaration
  @Output()
  onSendRequest = new EventEmitter<string>();

  constructor() { }

  ngOnInit(): void {
  }
  onSend() {
    alert('sending data to parent')
    //emit data  -  next method in subject
    this.onSendRequest.emit(this.message)
  }

}


Parent:

<div>
    <h1 style="text-align: center;">Parent Component</h1>
    <h2>{{childMessage}}</h2>
</div>
<hr/>
<app-child (onSendRequest)="onReadData($event)" ></app-child>

export class ParentComponent {

  childMessage: string;
  onReadData(event: any) {
    this.childMessage = event
  }

}

..............................................................................................
				  Dynamic Css  - How to change Style dynamically
.............................................................................................
class binding and style binding
...............................

class binding:

<div [class.special]="isSpecial" [class]="classExpression">Some text.</div>

style binding:

<nav [style.background-color]="expression"></nav>
<nav [style.backgroundColor]="expression"></nav>



<div (click)="changeStyle()" [class.special]="isSpecial">Some text.</div>
<a [style.text-decoration]="activeLinkStyle">Home Page</a>

import { Component, OnInit } from '@angular/core';

@Component({
  selector: 'app-dynamiccss',
  templateUrl: './dynamiccss.component.html',
  styles: [
  ]
})
export class DynamiccssComponent implements OnInit {
  isSpecial: boolean = true
  activeLinkStyle = 'overline';
  constructor() { }

  changeStyle() {
    this.isSpecial = !this.isSpecial
  }

  ngOnInit(): void {
  }

}

styles.css
.special {
   font-size: large;
   font-weight: 400;
   color:brown;
}
..............................................................................................
..............................................................................................
					..............................................................................................
				 Pipes
..............................................................................................

What is pipe?
 pipe object used for data formating.

eg:
 show uppercase
 show money values - $,#,
 show date format  - 1/10/2021 , feb 10 2021...
 custom formates

Angular provides lot of built in pipes, you can write your own pipes as well.
....
Syntax:
  some data | nameof the pipe.

Pipe with Input :
  some data | nameof the pipe:input.

Builtin pipes:

DatePipe: Formats a date value according to locale rules.

UpperCasePipe: Transforms text to all upper case.

LowerCasePipe: Transforms text to all lower case.

CurrencyPipe: Transforms a number to a currency string, formatted according to locale rules.

DecimalPipe: Transforms a number into a string with a decimal point, formatted according to locale rules.

PercentPipe: Transforms a number to a percentage string, formatted according to locale rules.

asyncPipe : to bind list of values async


<div>
  <h1 style="text-align: center;">Pipes</h1>
  <div>
    <h1>String</h1>
    <p>{{message | uppercase}}</p>
    <p>{{message | lowercase}}</p>
    <p>{{message | titlecase}}</p>
    <h1>Numbers</h1>
    <p>{{price | percent}}</p>
    <p>{{price | currency}}</p>
    <!-- pipe with input -->
    <p>{{price | currency:'INR'}}</p>
    <h1>Date</h1>
     <p>{{date | date}}</p>
     <p>{{date | date:'short'}}</p>
     <p>{{date | date:'dd/MM/yyyy'}}</p>

    <!-- Pipe chaining -->
    <p>{{date | date:'medium' | uppercase}}</p>

    <!-- Json -->
    <h1>JSON</h1>

    <p>{{employee | json}}</p>
    <h1>Custom Pipes</h1>
    <p>{{price | decimalfraction}}</p>
    <p>{{price | decimalfraction:3}}</p>
  </div>
</div>

<!-- 10.8766 --- >10.9 / 10.99 -->
import { Pipe, PipeTransform } from '@angular/core';

@Pipe({
  name: 'decimalfraction'
})
export class DecimalfractionPipe implements PipeTransform {

  transform(value: number, numberofDigits: number = 1): string {
    return value.toFixed(numberofDigits)
  }

}

import { Component } from '@angular/core';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent {
  title = 'pipes';
  message: string = "hello!"
  price: number = 1000.898766
  date = new Date();
  employee = {
    id: 1,
    name: 'subramanian',
    city: 'coimbatore'
  }
}
import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';
import { DecimalfractionPipe } from './decimalfraction.pipe';



@NgModule({
  declarations: [
    DecimalfractionPipe
  ],
  imports: [
    CommonModule
  ],
  exports: [
    DecimalfractionPipe
  ]
})
export class UtilsModule { }
..............................................................................................
				 Directives
.............................................................................................

............................................................................................
					Directives
...........................................................................................

What is directive?
  Directive is custom element / attribute..

<app-root> ,<app-root [title]>


Types of Directives:
1.Template directive
2.Structural directive
3.Attribute directive




1.Template directive
   The directive with Template ; all components create template directive
  <app-root> ----------------template directive
  <app-profile>--------------template directive

All component's meta data is inherited from Directive meta.
Directive is parent , Component is child

Every component is directive.


2.Structural Directive
   It is type of directive, used to change HTML Layouts.
   They shape or reshape the DOM's "Structure" typically by adding,removing and manipulating
   the host elements to which they attached.
   
  -Host element means html elements eg div,span,li,table.
  -It is one of the "special attribute" directive
  -All structural directive starts with "*" notation.

Built in structural directives

1.*ngFor : for loop
2.*ngIf  : if condition
3.*ngSwitch : switch

..............................................................................................						    CommonModule

Where are structural directives?

ngFor itself is object part of commonmodule.

incase if you are using structural directives inside submodule, commonModule must have been injected.

if any component part of main module, we dont need to inject commonModule becuase BrowserModule which contains all structural directives.





List /Array rendering:
......................

Layouts:
1.List view Layout
   -ul li
2.Card View Layout
  div
3.Grid View Layout
  table tr td


1.for Loop: *ngFor

-where ever you want to repeate elements

element could be dom element or custom elements

eg:
 <anyelement *ngFor="condition">

 <div *ngFor="let variableName of arrayname">
       {{VariableName.property}}
 </div>
 This code will create more div elements

 <app-item-list *ngFor="">
Static view:
<ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>

    </ul>

<div>
    <h1 style="text-align: center;">For loop</h1>

    <!--ul element-->
    <ul>
        <li *ngFor="let i of numbers">{{i}}</li>
    </ul>
    <!--Ui element for tod-->
    <ul class="list-group">
        <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let todo of todos">
            <span class="badge badge-primary badge-pill"> {{todo.id}} </span> {{todo.title}}
        </li>

    </ul>
    <div class="card" *ngFor="let todo of todos">
        <h5 class="card-header">{{todo.id}}</h5>
        <div class="card-body">
            <h5 class="card-title">{{todo.userId}}</h5>
            <p class="card-text">{{todo.title}}</p>
            <a href="#" class="btn btn-primary">Update</a>
        </div>
    </div>
</div>

////////////////////////////////////////////////////////////////////////////////////////////

eg:
<div>
    <ul>
        <li *ngFor="let course of courses">
            {{course}}
        </li>
    </ul>
</div>
<h2>Users data</h2>
<div>
    <div *ngFor="let user of users">
        <h3>{{user.username}}</h3>
        <p>{{user.email}}</p>
        <address>
            <p>{{user.address.street}},{{user.address.city}}</p>
        </address>
    </div>
</div>

import { Component, OnInit } from '@angular/core';
import { USERS } from '../mock-data/users';

@Component({
  selector: 'app-forloop',
  templateUrl: './forloop.component.html',
  styles: [
  ]
})
export class ForloopComponent implements OnInit {

  courses: Array<string> = ["javascript", "angular", "Microservices"]

  users: Array<any> = USERS;




  constructor() { }

  ngOnInit(): void {
  }

}
.............................................................................................
				if..else,ngtemplate,#(template reference variable)
............................................................................................

import { Component, OnInit } from '@angular/core';
import { USERS } from '../mock-data/users';

@Component({
  selector: 'app-ifelse',
  templateUrl: './ifelse.component.html',
  styles: [
  ]
})
export class IfelseComponent implements OnInit {

  isEnabled: boolean = true
  users!: Array<any>;
  loading: boolean = true;
  status: string = "loading....."
  isHidden: boolean = false;

  constructor() {
    setTimeout(() => {
      this.users = USERS;
      this.loading = !this.loading;
    }, 5000);
  }

  toggle() {
    this.isHidden = !this.isHidden;
  }
  ngOnInit(): void {
  }

}
<div *ngIf="isEnabled; else mycondition">
    <h1>You have Facility!</h1>
</div>

<ng-template #mycondition>
    <h1>Sorry! Facility is not available</h1>
</ng-template>

<h2>Progress bar</h2>
<div *ngIf="loading; else notLoading  ">
    <h2>{{status}}</h2>
</div>
<ng-template #notLoading>
    <div *ngFor="let user of users">
        <h3>{{user.username}}</h3>
        <p>{{user.email}}</p>
        <address>
            <p>{{user.address.street}},{{user.address.city}}</p>
        </address>
    </div>
</ng-template>
<h2>Ng vs Hidden attribute</h2>
<button class="btn btn-success" (click)="toggle()">Toggle</button>
<!--Show and Hide-->
<!-- <div *ngIf="isHidden">
    <h1>Hello</h1>
</div> -->
<div [hidden]="isHidden">
    <h1>Hai</h1>
</div>
..............................................................................................
					Switch case
..............................................................................................

<h1 style="text-align: center;">Swich case </h1>
<input [(ngModel)]="input">
<button (click)="showFeedback()">Show Feedback</button>

<div [ngSwitch]="feedback">
    <p *ngSwitchCase="'good'">Good</p>
    <p *ngSwitchCase="'verygood'">Very Good</p>
    <p *ngSwitchCase="'bad'">Bad</p>
    <p *ngSwitchDefault>Your input is not matching</p>
</div>

<div [ngSwitch]="feedback">
    <ng-template [ngSwitchCase]="'good'">
        <h3>Good</h3>
    </ng-template>
    <ng-template [ngSwitchCase]="'verygood'">
        <h3>Very Good</h3>
    </ng-template>
    <ng-template [ngSwitchCase]="'bad'">
        <h3>bad</h3>
    </ng-template>
    <ng-template ngSwitchDefault>
        <h3>Your input is not matching</h3>
    </ng-template>
</div>
import { Component, OnInit } from '@angular/core';

@Component({
  selector: 'app-switchcase',
  templateUrl: './switchcase.component.html',
  styles: [
  ]
})
export class SwitchcaseComponent implements OnInit {

  input: string = ""
  feedback: string = "good"
  constructor() { }
  showFeedback() {
    this.feedback = this.input
  }

  ngOnInit(): void {
  }

}
..............................................................................................
				   Attribute Directives
.............................................................................................

How to add new extra attributes on html elements

<div myattribute=somevalue>

 Adding extra behaviour to existing dom elements.

eg:
 <div subu="">

 <div appHighlight>

How to create our own attribute directive.

import { Directive, ElementRef, HostListener } from '@angular/core';

@Directive({
  selector: '[appHighlight]'
})
export class HighlightDirective {

  constructor(private element:ElementRef) { 
    //  console.dir(this.element.nativeElement)
    this.element.nativeElement.style.backgroundColor = 'yellow'
  }
  @HostListener('mouseenter')
  onMouseEnter() {
    this.highLight('blue')
  }
  @HostListener('mouseleave')
  onMouseLeave() {
    this.highLight(null)
  }
  private highLight(color: any) {
    this.element.nativeElement.style.backgroundColor = color
  }
}
<div>
    <h1 appHighlight>IBM</h1>

    <p appHighlight>IBM</p>

</div>
..............................................................................................
					Forms
.............................................................................................

Template Reference Variable #

DOM Object :  Every HTML Element is Object called DOM object

<h1> -object
<div> - object

How to access DOM object inside code(component/directive).

1.inside component.
  $event
2.inside directive(Attribute)
  ElementRef

How to access DOM object inside template itself(across template)

<div>
 <h1 #myvar >Hello</h1>

 <div> 
    {{myvar.innerHTML}}
 </div>

</div>
Forms are used to get input from the User.

Types of Forms

1.Template driven Forms
2.Reactive forms


Tempate Driven Forms:
...................

Steps:

1.FormsModule

import { NgModule } from '@angular/core';
import { FormsModule } from '@angular/forms';
import { BrowserModule } from '@angular/platform-browser';
import { AppComponent } from './app.component';

@NgModule({
  declarations: [
    AppComponent
  ],
  imports: [
    BrowserModule,
    FormsModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }

2.declare FormModel Object going to hold form field data

export class PostFormModel{
    constructor(public id: number, public title: string, public author: string){
    }
}

3.Create Model Object inside component.

export class AppComponent {
  post: any;
  constructor() {
    this.post = new PostFormModel(Math.random(), 'Learn Angular', 'Misko')
  }
}

Step 4 : 
Create inital form Template
 -Forms should have bootstrap style

<div class="container">
  <h1>Post Form</h1>
  <form>
    <div class="form-group">
      <label for="title">Title</label>
      <input type="text" class="form-control" id="title" required>
    </div>

    <div class="form-group">
      <label for="name">Name</label>
      <input type="text" class="form-control" id="name" required>
    </div>

    <button type="submit" class="btn btn-success">Submit</button>

  </form>
</div>


Step 5:

Data binding
   Binding textbox(form controls) with Model Object
   We have many ways
  1.through instance variable,$event
  2.through [(ngModel)]="post.title"
   ngModel = > it is an object from "FormsModule"
   ngModel it is dto object=>data transfering between view and component.

//
Form Control value property is bound with name property of input control.

<input [(ngModel)]="post.title" name="title" type="text" class="form-control" id="title" required>

    <form>
       <!--TODO: Remove this once testing over-->
       <pre>{{post | json}}</pre>
      <div class="form-group">
         <label for="title">Title</label>
         <input [(ngModel)]="post.title" name="title" type="text" class="form-control" id="title" required>
       </div>
       <div class="form-group">
         <label for="name">Name</label>
         <input [(ngModel)]="post.author" name="author" type="text" class="form-control" id="name" required>
       </div>
   
       <button type="submit" class="btn btn-success">Submit</button>
    </form>

*****************************************************************************************
					Vaildation
///////////////////////////////////////////////////////////////////////////////////////////

Objects In the FormsModule:

NgForm : 

 It is object representation of "form" element.
 Can be used to control form validations.
 in order to access the NgForm object inside template. You have to use template reference

<form #postForm> =>postForm points HTMLForm Object

ngForm is Object which inherits HTMLForm

class ngForm extends HTMLForm{
  +extra behavior=>Ready made validation code
  +form submission behviours
}

What is meaning of this code <form #postForm>?

 HTMLFORMMobject ----postPorm

dummy code for the above template
 let postForm =  new HTMLForm();

what we need
 let postForm = new NgForm()

<form #postForm="ngForm"> 


The variable postForm is now a reference to the NgForm 
directive that governs the form as a whole.

The NgForm directive:

What NgForm directive? You didn't add an NgForm directive before.

Angular did. Angular automatically creates and attaches
 an NgForm directive to the <form> tag.

"The NgForm directive supplements the form element with additional features. 

It holds the controls you created for the elements  with an "ngModel directive" and name attribute, and monitors their properties, including their validity.
 
It also has its own valid property which is true only if every contained control is valid."

Note: NgForm is built Object ,has more logic for simlifying our form handling process.

********************************************************************************************
********************************************************************************************
NgModel :

 1.Transfering data between UI and Controller .

NgModel not only for data transfer, which does so many other things beyond twoway data binding.

Track control(form element) state and validity with ngModel:
............................................................

Form element states:

Angular provides built-in css classes to track form control state"

State 	                         Class if true 	  Class if false

The control has been visited.  	  ng-touched 	    ng-untouched
The control's value has changed.  ng-dirty 	    ng-pristine
The control's value is valid. 	  ng-valid 	    ng-invalid

State Tracking Steps:

1.Look but don't touch.
2.Click inside the name box, then click outside it.
3.Add slashes to the end of the name.
4.Erase the name.

ng-untouched - if you dont touch
ng-touched - if you touch
ng-dirty - if you changed
ng-invalid - if you remove all-empty field

Step 6:

Add custom CSS for visual feedback:

Valid + Required - green Color
Valid + optional - white color
Invalid (required | optional) - red Color

Angular Css:

.ng-valid[required], .ng-valid.required  {
  border-left: 5px solid #42A948; /* green */
}

.ng-invalid:not(form)  {
  border-left: 5px solid #a94442; /* red */
}

****************************************************************************************

Adding validation block to our code:
...................................

NgModel is Child Object of FormControl Object

class  Input{
 
}
class NgModel extends Input{
  //extra features : state tracking,enabling validation.
}

<input #Xx> -Here xxPoints only Input

<input #Xx="ngModel"> -Here xx points ngModel

      <input  [(ngModel)]="post.title" #errorMsg1="ngModel" name="title" type="text" class="form-control" id="title" required>

Step 7: Add Error Block
<div class="container">
  <h1>Post Form</h1>
  <form #postForm="ngForm">
    <!--TODO: Remove this once testing over-->
    <pre>{{post | json}}</pre>
    <div class="form-group">
      <label for="title">Title</label>
      <input [(ngModel)]="post.title" #errorMsg1="ngModel" name="title" type="text" class="form-control" id="title"
        required>
      <div [hidden]="errorMsg1.valid || errorMsg1.pristine" class="alert alert-danger">
        title is required
      </div>
    </div>

    <div class="form-group">
      <label for="name">Name</label>
      <input [(ngModel)]="post.author" #errorMsg2="ngModel" name="author" type="text" class="form-control" id="name"
        required>
      <div [hidden]="errorMsg2.valid || errorMsg2.pristine" class="alert alert-danger">
        Author is required
      </div>
    </div>
    <button type="submit" class="btn btn-success">Submit</button>

  </form>
</div>

Step 7: Disabling submit button until the whole form is valid.
*******************************************************************************************

Disabling submit button in case any validation fails:

  <button type="submit" class="btn btn-success" [disabled]="!postForm.form.valid">Submit</button>

*******************************************************************************************


Step 8:Adding combo box: Select Control


export class PostFormModel {
    constructor(public id: number, public title: string, public author: string, public category: string) {
    }
}
export class AppComponent {
  post: any;
  //you may get  this from services
  categories: Array<string> = ["User interface", "MicroServices", "Devops"];
  constructor() {
    this.post = new PostFormModel(Math.random(), 'Learn Angular', 'Misko', this.categories[0])
  }
}

    <div class="form-group">
      <label for="category">Category</label>
      <select class="form-control" id="category" name="category" 
       [(ngModel)]="post.category">
        <option *ngFor="let cat of categories"  [value]="cat">
          {{cat}}
        </option>
      </select>
    </div>
////////////////////////////////////////////////////////////////////////////////////////////

Step 9: How to submit Form? and show another page

Add listener in the form tag.
 <form #postForm="ngForm" (ngSubmit)="onSubmit()">


<div class="container">
  <h1>Post Form</h1>
  <div [hidden]="submitted">
    <form #postForm="ngForm" (ngSubmit)="onSubmit()">
      <!--TODO: Remove this once testing over-->
      <pre>{{post | json}}</pre>
      <div class="form-group">
        <label for="title">Title</label>
        <input [(ngModel)]="post.title" #errorMsg1="ngModel" name="title" type="text" class="form-control" id="title"
          required>
        <div [hidden]="errorMsg1.valid || errorMsg1.pristine" class="alert alert-danger">
          title is required
        </div>
      </div>

      <div class="form-group">
        <label for="name">Name</label>
        <input [(ngModel)]="post.author" #errorMsg2="ngModel" name="author" type="text" class="form-control" id="name"
          required>
        <div [hidden]="errorMsg2.valid || errorMsg2.pristine" class="alert alert-danger">
          Author is required
        </div>
      </div>

      <div class="form-group">
        <label for="category">Category</label>
        <select class="form-control" id="category" name="category" [(ngModel)]="post.category">
          <option *ngFor="let cat of categories" [value]="cat">
            {{cat}}
          </option>
        </select>
      </div>


      <button type="submit" class="btn btn-success" [disabled]="!postForm.form.valid">Submit</button>
    </form>
  </div>

  <!--Details Page-->
  <div class="container" [hidden]="!submitted">
    <h2>You submitted the following:</h2>
    <div class="row">
      <div class="col-xs-3">Id : </div>
      <div class="col-xs-9  pull-left">{{ post.id }}</div>
    </div>
    <div class="row">
      <div class="col-xs-3">Title : </div>
      <div class="col-xs-9  pull-left">{{ post.title }}</div>
    </div>
    <div class="row">
      <div class="col-xs-3">Author : </div>
      <div class="col-xs-9 pull-left">{{ post.author }}</div>
    </div>
    <div class="row">
      <div class="col-xs-3">Category : </div>
      <div class="col-xs-9 pull-left">{{ post.category }}</div>
    </div>
    <br>
    <button class="btn btn-primary" (click)="submitted=false">GoBack</button>
  </div>

</div>

import { Component } from '@angular/core';
import { PostFormModel } from './post.form.model';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent {
  post: any;
  submitted: boolean = false;
  //you may get  this from services
  categories: Array<string> = ["User interface", "MicroServices", "Devops"];
  constructor() {
    this.post = new PostFormModel(Math.random(), 'Learn Angular', 'Misko', this.categories[0])
  }
  onSubmit(){
     alert(JSON.stringify(this.post))
     this.submitted = true;
  }
}


export class PostFormModel {
    constructor(public id: number, public title: string, public author: string, public category: string) {
    }
}
.............................................................................................
					 Services
.............................................................................................
					
What is service ?

 Service itself is object holding data and biz logic.
 Service need to be accessed inside controller(component).


Java -Spring -Dependency Injection

class HelloService{

}

class HelloComponent {
 private HelloService helloService;

 //constructor injection
  HelloComponent(HelloService helloService){
      this.helloService =helloSerice
   }
 //setter injection
  public void setHelloService(HelloService helloService){
     this.helloService=HelloService
  }
}

HelloService helloService =new HelloService();
HelloComponent cmp = new HelloComponent(helloService)
cmp.setHelloService(helloService);


In Angular =>Typescript


@Injectable()
export class HelloService{
	
   //methods
}

@Component()
export class HelloComponent {
 //private HelloService helloService;
 //constructor injection
  constructor(private helloService:HelloService){
     // this.helloService =helloSerice
  }
  
}

In module:

providers: [HelloService]

This angular takes cares
let helloService =new HelloService();
let cmp = new HelloComponent(helloService)

........................................................................................................

Angular Component/Directive Life Cycle method sequence:

@Component()
export class MyComponent {}

new MyComponent()

  1.constructor is called

  2.ngOnChanges() -  only if any input properties are found

  3.ngOnInit()  - used to initalize the state after component is mounted.
		   used for data intialization,timers,websockets,ajax inital code.

  ...

  4.ngOnDestroy() - used to destroy resources allocated
                    removing timers,unsubscribering observable
.......................................................................................................

import { Component, OnInit, SimpleChanges } from '@angular/core';

@Component({
  selector: 'app-cmplifecycle',
  templateUrl: './cmplifecycle.component.html',
  styles: [
  ]
})
export class CmplifecycleComponent implements OnInit {
  counter: number = 1;

  constructor() {
    console.log('CmplifecycleComponent- constructor is called')
  }
  ngOnChanges(changes: SimpleChanges) {
    for (const propName in changes) {
      const chng = changes[propName];
      const cur = JSON.stringify(chng.currentValue);
      const prev = JSON.stringify(chng.previousValue);

    }
    console.log('CmplifecycleComponent- ngOnchanges')
  }
  ngOnInit(): void {
    console.log('CmplifecycleComponent -ngOnInit is called')
  }
  increment() {
    this.counter++;
  }
  //resource deallocation code
  ngOnDestroy() {
    console.log('CmplifecycleComponent -ngOnDestroy is called')
  }

}
<div>
    <h1>Parent Component</h1>
    <app-child [counter]="counter" ></app-child>
    <button (click)="increment()">increment</button>
</div>

.........................


import { Component, Input, OnInit, SimpleChanges } from '@angular/core';

@Component({
  selector: 'app-child',
  templateUrl: './child.component.html',
  styles: [
  ]
})
export class ChildComponent implements OnInit {
  @Input()
  counter: number = 0;

  constructor() {
    console.log('Child Component constructor is called')
  }

  //called only if component receives props from the parent component
  ngOnChanges(changes: SimpleChanges) {
    for (const propName in changes) {
      const chng = changes[propName];
      const cur = JSON.stringify(chng.currentValue);
      const prev = JSON.stringify(chng.previousValue);
      console.log(chng)
    }
    console.log('ChildComponent- ngOnchanges')
  }

  //only one time
  ngOnInit(): void {
    console.log('ChildComponent -ngOnInit is called')
  }

}
<p>child works!</p>
..............................................................................................

Service : Object creation and use

import { Injectable } from "@angular/core";


@Injectable({
    providedIn: 'root' // we tell the angular that use "root injector to create object"
})
export class GreetingService {
    constructor() {

    }
    //methods
    public sayHello(): string {
        return "Hello Service!!";
    }
    public sayHai(): string {
        return "Hai"
    }
    public sayGreet(): string {
        return "Greet";
    }

}

import { Component, OnInit } from '@angular/core';
import { GreetingService } from './greeing.service';

@Component({
  selector: 'app-greeting',
  templateUrl: './greeting.component.html',
  styles: [
  ]
})
export class GreetingComponent implements OnInit {

  // message:string = "Hello";
  message: string = "";
  hai:string = ""
  greet:string = ""
  //constructor injection
  constructor(private greetingService: GreetingService) {
    // // console.log(this.helloService.sayHello());
    // this.message = this.greetingService.sayHello();
    // this.hai = this.greetingService.sayHai();
    // this.greet = this.greetingService.sayGreet();
  }

  ngOnInit(): void {
    this.message = this.greetingService.sayHello();
    this.hai = this.greetingService.sayHai();
    this.greet = this.greetingService.sayGreet();
  }

}
.......................................................................................................

Services can take other service as dependency
.............................................

@Injectable({providedIn:'root'})
export class Logger {

}

@Injectable({
    providedIn: 'root' // we tell the angular that use "root injector to create object"
})
export class GreetingService {
    constructor(private logger:Logger) {

    }
    //methods
    public sayHello(): string {
      
        return "Hello Service!!";
    }
    public sayHai(): string {
        return "Hai"
    }
    public sayGreet(): string {
        return "Greet";
    }

}

.......................................................................................................

import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class LoggerService {

  constructor() { }

  private messages: string[] = [];

  add(message: string) {
    this.messages.push(message);
  }
  fetch(): string[] {
    return this.messages;
  }

  clear() {
    this.messages = [];
  }
}

greetingservice
import { Injectable } from "@angular/core";
import { LoggerService } from "../util/logger.service";


@Injectable({
    providedIn: 'root' // we tell the angular that use "root injector to create object"
})
export class GreetingService {
    //GreetingService has LoggerService dependency
    constructor(private logger: LoggerService) { }
    //methods
    public sayHello(): string {
        this.logger.add('SayHello method  is called')
        return "Hello Service!!";
    }
    public sayHai(): string {
        this.logger.add('sayHai method  is called')
        return "Hai"
    }
    public sayGreet(): string {
        this.logger.add('sayGreet method  is called')
        return "Greet";
    }

}
...........

Component
import { Component, OnInit } from '@angular/core';
import { LoggerService } from '../util/logger.service';
import { GreetingService } from './greeing.service';

@Component({
  selector: 'app-greeting',
  templateUrl: './greeting.component.html',
  styles: [
  ]
})
export class GreetingComponent implements OnInit {

  // message:string = "Hello";
  message: string = "";
  hai: string = ""
  greet: string = ""
  logMessages: string[] = [];
  //constructor injection
  constructor(private greetingService: GreetingService, private logger: LoggerService) {
    // // console.log(this.helloService.sayHello());
    // this.message = this.greetingService.sayHello();
    // this.hai = this.greetingService.sayHai();
    // this.greet = this.greetingService.sayGreet();
  }

  ngOnInit(): void {
    this.message = this.greetingService.sayHello();
    this.logMessages=this.logger.fetch()
    this.hai = this.greetingService.sayHai();
    this.logMessages=this.logger.fetch()
    this.greet = this.greetingService.sayGreet();
    this.logMessages=this.logger.fetch()

  }

}
........................................................................................................
..............................................................................................
				 Types of services

1.Sync services
  blocking services which blocks the current thread, so that ui will be freezed until the data
or result is available.
 
2.Async services
  Non blocking
  the task which wont block the current thread.
  The computation will be done in other threads, once the task is over the result will be handed over to main thread.


How to implement async programming in js(angular)?

1.callback pattern - core pattern
2.Promise pattern - wrapper for callbacks
3.Reactive programming-rxjs


callback pattern :
 passing function as parameter to another function, which gets called once async operation is completed

What could be async operation:

1.ajax call
2.timers
3.websockets



import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class CallbackpatternService {
  constructor() { }

  //biz method sync method
  public getValue(): number {
    return 10;
  }
  //biz method : async method : timer
  public delayValue(callback: any): void {
    //timer : Return "Hello" message to the caller after 5ms .
    setTimeout(callback, 5000, 100);
  }


}
import { Component, OnInit } from '@angular/core';
import { CallbackpatternService } from './callbackpattern.service';

@Component({
  selector: 'app-callbackpattern',
  templateUrl: './callbackpattern.component.html',
  styles: [
  ]
})
export class CallbackpatternComponent implements OnInit {

  syncValue: number = 0;
  asyncValueCb: number = 0;
  loading: boolean = true;
  status: string = "loding..."

  constructor(private cbService: CallbackpatternService) { }

  ngOnInit(): void {
    //sync call 
    this.syncValue = this.cbService.getValue();
    //async call
    this.cbService.delayValue((value: number) => {
      this.asyncValueCb = value;
      this.loading = false;
    });

  }

}
<div>
    <h1>Callback Pattern</h1>
    <h2>Sync Value : {{syncValue}}</h2>
    <div *ngIf="loading; else notLoading  ">
        <h2>{{status}}</h2>
    </div>
    <ng-template #notLoading>
         <h3>{{asyncValueCb}}</h3>
    </ng-template>
</div>
........................................................................................................

















